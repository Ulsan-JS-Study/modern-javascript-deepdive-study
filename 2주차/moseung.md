# 22. this
## 22.1 this 키워드
자신이 속한 객체를 가리키는 식별자를 참조할 수 있어야 함.

객체 리터럴로 생성한 객체의 경우, 매서드 내부에서 자신이 속한 객체를 가리키는 식별자를 재귀적으로 참조 가능
```javascript=
const circle = {
    // 프로퍼티 : 객체 고유의 상태 데이터
    radius : 5,
    
    // 메서드 : 상태 데이터를 참조하고 조작하는 동작
    getDiameter() {
        return 2 * circle.radius;
    }
}
```

하지만 자기 자신이 속한 객체를 재귀적으로 참조하는 방식은 좋지 않음

생성자 함수 방식으로 인스턴스를 생성하는 경우

```javascript=
function Circle(radius){
    // 이 시점에는 생성자 함수 자신이 생성할 인스턴스를 가리키는 식별자를 알 수 없음.
    ????.radius = radius;
}

    // 생성자 함수로 인스턴스를 생성하려면
    // 먼저 생성자 함수를 정의해야한다.
const circle = new Circle(5);
```

- this는 자신이 속한 객체 또는 자신이 생성할 인스턴스를 가리키는 자기 참조 변수
- this를 통해 자신이 속한 객체 또는 자신이 생성할 인스턴스의 프로퍼티나 메서드를 참조할 수 있음.
- this는 자바스크립트 엔진에 의해 암묵적으로 생성
- 함수를 호출하면 argument 객체와 this가 암묵적으로 함수 내부에 전달
- this 바인딩은 함수 호출 방식에 의해 동적으로 결정

생성자 함수 내부의 this는 생성자 함수가 생성할 인스턴스를 가리킴 -> 상황에 따라 가리키는 대상이 다름

## 22.2 함수 호출 방식과 this 바인딩
this 바인딩은 함수 호출 방식에 따라 동적으로 결정

동일한 함수도 다양한 방식으로 호출 가능
1. 일반 함수 호출
2. 메서드 호출
3. 생성자 함수 호출
4. Function.prototype.apply/call/bind 메서드에 의한 간접 호출

### 22.2.1 일반 함수 호출
this = 전역 객체
(strict mode인 경우, undefined가 바인딩)

중첩함수와 콜백 함수도 일반 함수로 호출되면 전역 객체가 바인딩
- 메서드 내부의 중첩 함수나 콜백 함수의 this 바인딩을 메서드의 this 바인딩과 일치시키기 위한 방법
```javascript=
const obj = {
    value : 100,
    foo() {
        // this 바인딩을 변수 that에 할당
        const that = this;
        
        setTimeout(function() {
            console.log(that.value);
        }, 100)
    }
}
```

### 22.2.2 메서드 호출
this = 메서드를 호출한 객체가 바인딩

### 22.2.3 생성자 함수 호출
this = 생성자 함수가 생성할 인스턴스가 바인딩

### 22.2.4 Function.prototype.apply/call/bind 메서드에 의한 간접 호출

#### apply
(this로 사용할 객체, 함수에게 전달할 인수 배열)

#### call
(this로 사용할 객체, 함수에게 전달할 인수1,2,3 ...)

두 함수의 본질적인 기능은 함수를 호출

#### bind
두 함수와 달리 함수를 호출하지 않고, this 바인딩이 교체된 함수를 새롭게 반환

메서드의 this와 메서드 내부의 중첩함수 또는 콜백 함수의 This가 불일치하는 문제를 해결하기 위해 사용
